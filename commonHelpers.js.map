{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '45081240-5f1794f19be8a159ba53eac07';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 12) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error('Network response was not ok');\n  }\n\n  return await response.json();\n}\n","export function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function renderImageCards(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <div class=\"photo-card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n}\n\nexport function appendImagesToGallery(markup) {\n  document.querySelector('.gallery').insertAdjacentHTML('beforeend', markup);\n}\n","(function () {\n  const originalAddEventListener = EventTarget.prototype.addEventListener;\n\n  EventTarget.prototype.addEventListener = function (type, listener, options) {\n    if (type === 'touchstart' || type === 'touchmove') {\n      if (typeof options === 'object') {\n        options.passive = true;\n      } else {\n        options = { passive: true };\n      }\n    }\n    originalAddEventListener.call(this, type, listener, options);\n  };\n})();\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImageCards,\n  clearGallery,\n  appendImagesToGallery,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet page = 1;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const query = event.target.elements.searchQuery.value.trim();\n  if (!query) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search term' });\n    return;\n  }\n\n  clearGallery();\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages(query, page);\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'No Results',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      const markup = renderImageCards(data.hits);\n      appendImagesToGallery(markup);\n      lightbox.refresh();\n      /*event.target.elements.searchQuery.value = '';*/\n      form.elements.searchQuery.value = '';\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","response","clearGallery","renderImageCards","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","appendImagesToGallery","markup","originalAddEventListener","type","listener","options","form","loader","lightbox","SimpleLightbox","event","iziToast","data"],"mappings":"wvBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAMG,CAAK,iEAAiEC,CAAI,aAAaC,CAAO,GAEpIE,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,6BAA6B,EAG/C,OAAO,MAAMA,EAAS,MACxB,CCZO,SAASC,GAAe,CAC7B,SAAS,cAAc,UAAU,EAAE,UAAY,EACjD,CAEO,SAASC,EAAiBC,EAAQ,CACvC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,iBAEKL,CAAa;AAAA,oBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,2BAGnBC,CAAK;AAAA,2BACLC,CAAK;AAAA,8BACFC,CAAQ;AAAA,+BACPC,CAAS;AAAA;AAAA;AAAA,GAInC,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,EAAsBC,EAAQ,CAC5C,SAAS,cAAc,UAAU,EAAE,mBAAmB,YAAaA,CAAM,CAC3E,EClCC,UAAY,CACX,MAAMC,EAA2B,YAAY,UAAU,iBAEvD,YAAY,UAAU,iBAAmB,SAAUC,EAAMC,EAAUC,EAAS,EACtEF,IAAS,cAAgBA,IAAS,eAChC,OAAOE,GAAY,SACrBA,EAAQ,QAAU,GAElBA,EAAU,CAAE,QAAS,KAGzBH,EAAyB,KAAK,KAAMC,EAAMC,EAAUC,CAAO,CAC/D,CACA,KAaA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAClC,SAAS,cAAc,UAAU,EACjD,MAAMC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAC1CvB,EAAO,EAEXoB,EAAK,iBAAiB,SAAU,MAAMI,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMzB,EAAQyB,EAAM,OAAO,SAAS,YAAY,MAAM,OACtD,GAAI,CAACzB,EAAO,CACV0B,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,4BAA4B,CAAE,EACxE,MACD,CAEDrB,IACAiB,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMK,EAAO,MAAM5B,EAAYC,EAAOC,CAAI,EAC1C,GAAI0B,EAAK,KAAK,SAAW,EACvBD,EAAS,QAAQ,CACf,MAAO,aACP,QACE,0EACV,CAAO,MACI,CACL,MAAMV,EAASV,EAAiBqB,EAAK,IAAI,EACzCZ,EAAsBC,CAAM,EAC5BO,EAAS,QAAO,EAEhBF,EAAK,SAAS,YAAY,MAAQ,EACnC,CACF,MAAe,CACdK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,CACL,QAAY,CACRJ,EAAO,MAAM,QAAU,MACxB,CACH,CAAC"}